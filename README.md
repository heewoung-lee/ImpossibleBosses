![ChatGPT Image 2025년 5월 21일 오전 07_58_25](https://github.com/user-attachments/assets/78780fee-a54d-4b52-90dc-0bca75f68ba7)
## 📘 목차
- [프로젝트 소개](#프로젝트-소개)
- [개발 기간](#개발-기간)
- [사용 기술](#사용-기술)
- [핵심 로직](#핵심-로직)


<br/>
<br/>

## 🔍 프로젝트 소개
**ImpossibleBosses는 Unity6 기반으로 개발된 멀티플레이 PvE 보스 레이드 게임입니다. 플레이어는 최대 8명까지 한 팀을 이루어 거대한 보스 몬스터에 도전하며, 각 플레이어는 아처(Archer), 파이터(Fighter), 메이지(Mage), 몽크(Monk), 네크로맨서(Necromancer)의 5가지 클래스 중 하나를 선택해 고유한 스킬을 사용합니다. 
팀원의 협동과 전략을 통해 보스의 다양한 공격 패턴을 파악하고 공략하는 것입니다. 레이드 진행 중 플레이어들은 아이템 획득, 장비 교체, 스킬 업그레이드 등을 통해 지속적으로 성장하며, 보스를 물리치면 전리품과 경험치 보상을 획득하게 됩니다. 


<br/>
<br/>


## 📆 개발 기간
🗓 **2024-12-11 ~ **


<br/>
<br/>

## 🔧 사용 기술
| 구분 | 스택 |
|:--|:--|
| **Engine** | `Unity 6` |
| **Networking** | `Unity Netcode` |
| **Voice & Chat** | `Vivox Service` |
| **Auth / DB** | `Google OAuth 2`, `Google Spreadsheet` |
| **AI Behavior** | `Behaviour Tree Designer` |
| **TestTool** | `Unity Play Mode Scenarios` |


<br/>
<br/>

## 🗝 핵심 로직

### 🔐 로그인
게임을 시작하면 LoginScene이 로드되며, 
플레이어는 로그인 창에서 기존 계정으로 로그인하거나 새 계정을 생성할 수 있습니다. 
입력한 ID와 비밀번호는 LogInManager를 통해 Google 스프레드시트의 사용자 데이터와 대조되어 인증됩니다. 
로그인에 성공하면 로비로 넘어갑니다.
![Image](https://github.com/user-attachments/assets/acc72412-c500-49c4-8d64-7f26c8e4a62e)


### 📥 데이터 불러오기
-로그인 직후 **DataManager**가 Google 스프레드시트에서
플레이어 스탯
몬스터 스탯/패턴
아이템 목록
을 비동기 로드합니다.
로드된 데이터는 Dictionary로 캐싱되어 이후 씬에서도 재사용


### 🏠 로비
1. **계정 인증 후 LobbyScene으로 전환됩니다.
이 단계에서 게임은 LobbyManager를 사용해
Unity 서비스를 초기화하고 인증을 거쳐 대기 로비(WaitLobby)에 접속합니다.
로비 씬에서는 **로비 UI**가 표시되어 전체 채팅창과 방 목록(UI 표시용 리스트)이 나타납니다. 플레이어는 로비에서 글로벌 채팅을 보내며 다른 플레이어들과 소통할 수 있습니다. 


### 🔗 릴레이 서버
- **호스트(방장)** 가 방을 만든다면 Relay 서비스가 실행됩니다.  
  - 호스트는 “Allocation”을 받아 서버 역할을 하고,  
  - 참가자는 “Join Code”를 사용해 그 Allocation에 붙습니다.  
- 덕분에 플레이어들은 서로의 실제 IP를 몰라도 되고, NAT/방화벽 문제 없이 통신할 수 있습니다.  
- 만약 호스트가 중도 이탈하면, 새 호스트가 Allocation을 다시 받아 연결을 **끊김 없이 승계**합니다.
![Image](https://github.com/user-attachments/assets/24e4cb53-1ba9-4500-9ddb-59168fc3628e)



### 🏎️ 최적화 방법
| 영역 | 왜 이런 방법을 썼는가? |
|------|-----------------------|
| **오브젝트 풀링 & 네트워크 오브젝트 풀링** | 탄, 파티클, “자주 생성·삭제”되는 오브젝트를 미리 만들어 reuse → GC 쓰레기 최소화 |
| **네트워크 패킷 절감** | 필요 데이터만 압축해 전송 → 필요데이터를 받으면 이후 연산은 로컬에서 진행 |



### 🌐 네트워크 동기화
1. **서버 권한 구조**  
   - 보스 AI와 게임 판정은 **호스트**가 단독으로 계산
   - 결과(피해량, 상태 변화)를 **NetworkVariable / RPC**로 모든 클라이언트에 전송
2. **동기화 단위**  
   - **결정적(Deterministic) 데이터**: 위치, 체력, 애니메이션 타이밍 → 신뢰성 높은 채널로 전송  
   - **연출용 데이터**: 카메라 흔들림, 데미지 숫자 → 가벼운 Unreliable 채널 사용
3. **예측 & 보간**  
   - 플레이어 입력은 먼저 **로컬 예측**으로 즉시 반영, 서버와 차이가 나면 부드럽게 보정합니다.  
   - 원격 플레이어/보스 위치는 **보간**으로 끊김 없이 이어집니다.

---
![Image](https://github.com/user-attachments/assets/33e41408-493a-4778-830d-c0c69d4055a5)
